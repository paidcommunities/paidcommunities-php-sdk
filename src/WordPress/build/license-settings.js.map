{"version":3,"file":"license-settings.js","mappings":"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","sources":["webpack://paidCommunities/webpack/bootstrap","webpack://paidCommunities/webpack/runtime/compat get default export","webpack://paidCommunities/webpack/runtime/define property getters","webpack://paidCommunities/webpack/runtime/hasOwnProperty shorthand","webpack://paidCommunities/webpack/runtime/make namespace object","webpack://paidCommunities/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://paidCommunities/external window \"regeneratorRuntime\"","webpack://paidCommunities/external window \"jQuery\"","webpack://paidCommunities/./assets/js/license-settings.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"regeneratorRuntime\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"jQuery\"];","import $ from 'jquery';\n\nconst getValue = key => paidCommunitiesLicenseParams[key] || null;\n\nconst activate = () => {\n    const key = getValue('pluginName');\n    const id = `#${key}_license`;\n    const license = $(id).val();\n    return new Promise((resolve) => {\n        $.ajax({\n            type: 'POST',\n            dataType: 'json',\n            url: getValue('ajaxUrl'),\n            data: {\n                action: getValue('actions').activate,\n                license\n            }\n        }).done(response => {\n            return resolve(response);\n        }).fail((jqXHR) => {\n            return resolve(response);\n        })\n    });\n}\n\nconst deactivate = () => {\n    return new Promise((resolve) => {\n        $.ajax({\n            type: 'POST',\n            dataType: 'json',\n            url: getValue('ajaxUrl'),\n            data: {\n                action: getValue('actions').deactivate\n            }\n        }).done(response => {\n            return resolve(response);\n        }).fail((jqXHR) => {\n            return resolve(response);\n        })\n    })\n}\n\nconst handleButtonClick = async e => {\n    let response;\n    let $button = $(e.currentTarget);\n    let text = $button.text();\n    let license = getValue('license');\n    try {\n        $button.prop('disabled', true);\n        if ($button.hasClass('activate')) {\n            $button.text(getValue('i18n').activateMsg);\n            response = await activate();\n        } else {\n            $button.text(getValue('i18n').deactivateMsg);\n            response = await deactivate();\n        }\n        if (!response.success) {\n            return addNotice(response?.error?.message);\n        }\n        $('.pc-license-settings').replaceWith(response.data.html);\n        return addNotice(response.data.message);\n    } catch (error) {\n        return addNotice(error.message);\n    } finally {\n        $button.prop('disabled', false);\n        $button.text(text);\n    }\n}\n\nconst addNotice = message => {\n    const $message = $(message);\n    $message.on('click', '.pc-close-notice', () => {\n        $message.remove();\n    });\n    $('.pc-notices').append($message);\n}\n\n$(document.body).on('click', '.paidcommunities-license-btn', handleButtonClick);"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","window","getValue","paidCommunitiesLicenseParams","activate","id","license","$","val","type","dataType","url","data","action","response","fail","jqXHR","deactivate","handleButtonClick","fn","e","$button","currentTarget","text","hasClass","activateMsg","deactivateMsg","success","addNotice","message","replaceWith","html","self","this","args","arguments","apply","err","undefined","$message","on","remove","append","document","body"],"sourceRoot":""}