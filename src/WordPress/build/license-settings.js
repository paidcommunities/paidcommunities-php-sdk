(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}e.r(t);const r=window.regeneratorRuntime;var a=e.n(r);const i=window.jQuery;var o=e.n(i),c=function(e){return paidCommunitiesLicenseParams[e]||null},s=function(){var e=c("pluginName"),t="#".concat(e,"_license"),n=o()(t).val();return new Promise((function(e){o().ajax({type:"POST",dataType:"json",url:c("ajaxUrl"),data:{action:c("actions").activate,license:n}}).done((function(t){return e(t)})).fail((function(t){return e(response)}))}))},u=function(){return new Promise((function(e){o().ajax({type:"POST",dataType:"json",url:c("ajaxUrl"),data:{action:c("actions").deactivate}}).done((function(t){return e(t)})).fail((function(t){return e(response)}))}))},l=function(){var e,t=(e=a().mark((function e(t){var n,r,i,l,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o()(t.currentTarget),i=r.text(),c("license"),e.prev=3,r.prop("disabled",!0),!r.hasClass("activate")){e.next=12;break}return r.text(c("i18n").activateMsg),e.next=9,s();case 9:n=e.sent,e.next=16;break;case 12:return r.text(c("i18n").deactivateMsg),e.next=15,u();case 15:n=e.sent;case 16:if(n.success){e.next=18;break}return e.abrupt("return",d(null===(l=n)||void 0===l||null===(p=l.error)||void 0===p?void 0:p.message));case 18:return o()(".pc-license-settings").replaceWith(n.data.html),e.abrupt("return",d(n.data.message));case 22:return e.prev=22,e.t0=e.catch(3),e.abrupt("return",d(e.t0.message));case 25:return e.prev=25,r.prop("disabled",!1),r.text(i),e.finish(25);case 29:case"end":return e.stop()}}),e,null,[[3,22,25,29]])})),function(){var t=this,r=arguments;return new Promise((function(a,i){var o=e.apply(t,r);function c(e){n(o,a,i,c,s,"next",e)}function s(e){n(o,a,i,c,s,"throw",e)}c(void 0)}))});return function(e){return t.apply(this,arguments)}}(),d=function(e){var t=o()(e);t.on("click",".pc-close-notice",(function(){t.remove()})),o()(".pc-notices").append(t)};o()(document.body).on("click",".paidcommunities-license-btn",l),(this.paidCommunities=this.paidCommunities||{}).licenseSettings=t})();
//# sourceMappingURL=license-settings.js.map